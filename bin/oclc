#!/usr/bin/env python

"""
Compile OpenCL kernel with PyOpenCL.
Useful when checking for errors.
"""

import pyopencl as cl
from sys import argv, stdin


ctx = cl.create_some_context()
queue = cl.CommandQueue(ctx)


def compile(io):
    try:
        cl.Program(ctx, io.read()).build()
    except Exception as err:
        print(err)

if __name__ == "__main__":
    if len(argv) > 1:
        for f in argv[1:]:
            compile(open(f))
    else:
        compile(stdin)
